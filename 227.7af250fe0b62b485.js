"use strict";(self.webpackChunkngdemo=self.webpackChunkngdemo||[]).push([[227],{5227:(Q,d,i)=>{i.r(d),i.d(d,{PostsModule:()=>r});var c=i(6895),p=i(4546),e=i(3467),t=i(8256),m=i(3151);const P=function(o){return["/posts",o]};function y(o,n){if(1&o&&(t.TgZ(0,"li")(1,"a",2)(2,"h5",3),t._uU(3),t.qZA()()()),2&o){const s=n.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,P,null==s?null:s.id)),t.xp6(2),t.hij(" ",null==s?null:s.title," ")}}class a{constructor(){this.posts=[]}trackById(n,s){return s.id}}function T(o,n){if(1&o&&(t.ynx(0),t._UZ(1,"app-posts",4),t.BQk()),2&o){const s=t.oxw().ngIf;t.xp6(1),t.Q6J("posts",s)}}function Z(o,n){if(1&o&&(t.ynx(0),t.YNc(1,T,2,1,"ng-container",3),t.BQk()),2&o){const s=n.ngIf;t.xp6(1),t.Q6J("ngIf",s.length)}}a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-posts"]],inputs:{posts:"posts"},decls:2,vars:2,consts:[[1,"grid","grid-cols-1","gap-4","md:grid-cols-2","xl:grid-cols-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[1,"mb-2","text-2xl","font-bold","tracking-tight","text-gray-900"]],template:function(n,s){1&n&&(t.TgZ(0,"ul",0),t.YNc(1,y,4,4,"li",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",s.posts)("ngForTrackBy",s.trackById))},dependencies:[c.sg,p.rH]});class g{constructor(){this.postService=(0,t.f3M)(m.LY),this.route=(0,t.f3M)(p.gz)}ngOnInit(){this.posts$=this.postService.getPosts(),this.route.data.subscribe({next:n=>{console.log(n)}})}}g.\u0275fac=function(n){return new(n||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-post-page"]],decls:6,vars:3,consts:[[1,"text-4xl","font-bold"],["heading",""],[1,"my-4","py-4"],[4,"ngIf"],[1,"h-full",3,"posts"]],template:function(n,s){1&n&&(t.TgZ(0,"h1",0,1),t._uU(2,"Post List"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,Z,2,1,"ng-container",3),t.ALo(5,"async"),t.qZA()),2&n&&(t.xp6(4),t.Q6J("ngIf",t.lcZ(5,1,s.posts$)))},dependencies:[c.O5,a,c.Ov]});var B=i(3900);function I(o,n){1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2,"Edit"),t.qZA(),t.BQk())}function v(o,n){1&o&&(t.ynx(0),t.TgZ(1,"span"),t._uU(2,"Delete"),t.qZA(),t.BQk())}function A(o,n){if(1&o&&(t.ynx(0),t.TgZ(1,"h5",1),t._uU(2),t.ALo(3,"async"),t.TgZ(4,"small"),t.YNc(5,I,3,0,"ng-container",0),t.ALo(6,"async"),t.YNc(7,v,3,0,"ng-container",0),t.ALo(8,"async"),t.qZA()(),t.TgZ(9,"p",2),t._uU(10),t.ALo(11,"async"),t.qZA(),t.BQk()),2&o){const s=t.oxw(2);let f,h,x,_;t.xp6(2),t.hij(" ",null==(f=t.lcZ(3,4,s.post$))?null:f.title," "),t.xp6(3),t.Q6J("ngIf",s.rolesOriginal[s.user.role].includes(s.permission.UPDATE_POST)&&(null==(h=t.lcZ(6,6,s.post$))?null:h.userId)===s.user.id),t.xp6(2),t.Q6J("ngIf",s.rolesOriginal[s.user.role].includes(s.permission.DELETE_POST)&&(null==(x=t.lcZ(8,8,s.post$))?null:x.userId)===s.user.id),t.xp6(3),t.hij(" ",null==(_=t.lcZ(11,10,s.post$))?null:_.body," ")}}function C(o,n){if(1&o&&(t.ynx(0),t.YNc(1,A,12,12,"ng-container",0),t.BQk()),2&o){const s=t.oxw();t.xp6(1),t.Q6J("ngIf",s.roles.includes(s.user.role))}}class u{constructor(){this.permission=e.g3,this.authService=(0,t.f3M)(m.e8),this.postService=(0,t.f3M)(m.LY),this.route=(0,t.f3M)(p.gz),this.user=this.authService.getSessionStorageUser()}ngOnInit(){this.post$=this.route.paramMap.pipe((0,B.w)(n=>this.postService.getPostById(Number(n.get("id"))))),this.sub2$=this.route.data.subscribe({next:({roles:n})=>{console.log(n),this.rolesOriginal=n,this.roles=Object.keys(n)}})}}u.\u0275fac=function(n){return new(n||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-post"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"mb-2","text-2xl","font-bold","tracking-tight","text-gray-900"],[1,"mb-2","text-base","font-bold","tracking-tight","text-gray-800"]],template:function(n,s){1&n&&t.YNc(0,C,2,1,"ng-container",0),2&n&&t.Q6J("ngIf",s.user)},dependencies:[c.O5,c.Ov]});const M=[{path:"",pathMatch:"full",component:g,data:{roles:{[e.HB.ADMIN]:e.IM,[e.HB.AUTHOR]:e.KM,[e.HB.USER]:e.uP}}},{path:":id",component:u,data:{roles:{[e.HB.ADMIN]:e.IM,[e.HB.AUTHOR]:e.KM,[e.HB.USER]:e.uP}}}];class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[p.Bz.forChild(M),p.Bz]});var O=i(8855);class r{}r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[c.ez,O.m,l]})}}]);